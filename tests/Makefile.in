TESTFILES=test1 test2 test3 test4 test5 test6 test7 test8 test9 test10 test11 test12 test13 test14 test15 test16 test17 test18 test19 test20 test21
LIBS=-L.. -I..

tests: build-tests run-tests
build-tests:
	for i in $(TESTFILES); do \
	$(CC) $(CFLAGS) -Wl,-rpath=$(CURDIR) -o $$i $$i.c $(LIBS) -lbitfield; done

run-tests:
	for i in $(TESTFILES); do \
#	echo -n "Running $$i... "; \
#	( ./$$i > /dev/null 2>&1 && echo "Passed.")  || (echo "Failed with code $$?"); \
	./$$i; \
	done

clean:
	rm -rvf $(TESTFILES)

distclean:
	rm Makefile
